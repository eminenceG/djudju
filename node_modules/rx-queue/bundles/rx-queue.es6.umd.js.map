{"version":3,"file":"rx-queue.es6.umd.js","sources":["../dist/src/config.js","../dist/src/rx-queue.js","../dist/src/debounce-queue.js","../dist/src/delay-queue.js","../dist/src/delay-queue-exector.js","../dist/src/throttle-queue.js"],"sourcesContent":["import { version } from '../package.json';\nexport let VERSION = version;\n//# sourceMappingURL=config.js.map","import { Subject, } from 'rxjs';\nimport { VERSION, } from './config';\n// default set to 500 milliseconds\nconst DEFAULT_PERIOD_TIME = 500;\n// https://codepen.io/maindg/pen/xRwGvL\nexport class RxQueue extends Subject {\n    constructor(period = DEFAULT_PERIOD_TIME) {\n        super();\n        this.period = period;\n        this.itemList = [];\n    }\n    next(item) {\n        if (this.observers.length > 0) {\n            super.next(item);\n        }\n        else {\n            this.itemList.push(item);\n        }\n    }\n    subscribe(nextOrObserver, error, complete) {\n        let subscription; // TypeScript strict require strong typing differenciation\n        if (typeof nextOrObserver === 'function') {\n            subscription = super.subscribe(nextOrObserver, error, complete);\n        }\n        else {\n            subscription = super.subscribe(nextOrObserver);\n        }\n        this.itemList.forEach(item => this.next(item));\n        this.itemList = [];\n        return subscription;\n    }\n    version() {\n        return VERSION;\n    }\n}\nexport default RxQueue;\n//# sourceMappingURL=rx-queue.js.map","import { interval, Subject, } from 'rxjs';\nimport { debounce, } from 'rxjs/operators';\nimport RxQueue from './rx-queue';\n/**\n * DebounceQueue drops a item if there's another one comes in a period of time.\n *\n * T: item type\n */\nexport class DebounceQueue extends RxQueue {\n    /**\n     *\n     * @param period milliseconds\n     */\n    constructor(period) {\n        super(period);\n        this.subject = new Subject();\n        this.subscription = this.subject.pipe(debounce(() => interval(this.period)))\n            .subscribe((item) => super.next(item));\n    }\n    next(item) {\n        this.subject.next(item);\n    }\n    unsubscribe() {\n        this.subscription.unsubscribe();\n        super.unsubscribe();\n    }\n}\nexport default DebounceQueue;\n//# sourceMappingURL=debounce-queue.js.map","import { concat, EMPTY, of, Subject, } from 'rxjs';\nimport { concatMap, delay, } from 'rxjs/operators';\nimport RxQueue from './rx-queue';\n/**\n * DelayQueue passes all the items and add delays between items.\n * T: item type\n */\nexport class DelayQueue extends RxQueue {\n    /**\n     *\n     * @param period milliseconds\n     */\n    constructor(period) {\n        super(period);\n        this.subject = new Subject();\n        this.subscription = this.subject.pipe(concatMap(args => concat(of(args), // emit first item right away\n        EMPTY.pipe(delay(this.period))))).subscribe((item) => super.next(item));\n    }\n    next(item) {\n        this.subject.next(item);\n    }\n    unsubscribe() {\n        this.subscription.unsubscribe();\n        super.unsubscribe();\n    }\n}\nexport default DelayQueue;\n//# sourceMappingURL=delay-queue.js.map","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport DelayQueue from './delay-queue';\n/**\n * DelayQueueExector calls functions one by one with a delay time period between calls.\n */\nexport class DelayQueueExector extends DelayQueue {\n    /**\n     *\n     * @param period milliseconds\n     */\n    constructor(period) {\n        super(period);\n        this.delayQueueSubscription = this.subscribe(unit => {\n            try {\n                const ret = unit.fn();\n                return unit.resolve(ret);\n            }\n            catch (e) {\n                return unit.reject(e);\n            }\n        });\n    }\n    execute(fn, name) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new Promise((resolve, reject) => {\n                const unit = {\n                    fn,\n                    name: name || fn.name,\n                    reject,\n                    resolve,\n                };\n                this.next(unit);\n            });\n        });\n    }\n    unsubscribe() {\n        this.delayQueueSubscription.unsubscribe();\n        super.unsubscribe();\n    }\n}\nexport default DelayQueueExector;\n//# sourceMappingURL=delay-queue-exector.js.map","import { interval, Subject, } from 'rxjs';\nimport { throttle, } from 'rxjs/operators';\nimport RxQueue from './rx-queue';\n/**\n * ThrottleQueue\n *\n * passes one item and then drop all the following items in a period of time.\n *\n * T: item type\n */\nexport class ThrottleQueue extends RxQueue {\n    /**\n     *\n     * @param period milliseconds\n     */\n    constructor(period) {\n        super(period);\n        this.subject = new Subject();\n        this.subscription = this.subject.pipe(throttle(_ => interval(this.period))).subscribe((item) => super.next(item));\n    }\n    next(item) {\n        this.subject.next(item);\n    }\n    unsubscribe() {\n        this.subscription.unsubscribe();\n        super.unsubscribe();\n    }\n}\nexport default ThrottleQueue;\n//# sourceMappingURL=throttle-queue.js.map"],"names":["Subject","debounce","interval","concatMap","concat","of","EMPTY","delay","this","throttle"],"mappings":"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"}